---
tags:
  - Blockchain/Ethereum
---


Tracing allows users to examine precisely what was executed by the [[EVM]] during some specific transaction or set of transactions.
There are two types of [[Transaction|transactions]] in [[Ethereum]]:
1. __value transfer__: just moves [[ETH]] from one account to another.
2. __contract execution__: executes some code stored at a contract address which can include altering stored data and transacting multiple times with other contracts and externally-owned accounts.
	- A contract execution transaction can therefore be a complicated web of interactions that can be difficult to unpick.

__Without EVM Tracing__:
It is difficult to know what a contract execution actually did, what data was modified and which addresses were touched.


## State Availability
---
In its simplest form, tracing a transaction entails requesting the Ethereum node to reexecute the desired transaction with varying degrees of data collection and have it return an aggregated summary. 

In order for a [[Geth]] node to reexecute a transaction, all historical state accessed by the transaction must be available. This includes:
- Balance, nonce, bytecode and storage of both the recipient as well as all internally invoked contracts.
- Block metadata referenced during execution of both the outer as well as all internally created transactions.
- Intermediate state generated by all preceding transactions contained in the same block as the one being traced.

This means there are limits on the transactions that can be traced imposed by the synchronization and pruning configuration of a node:
- An __archive__ node retains __all historical data__ back to genesis. It can therefore trace arbitrary transactions at any point in the history of the chain. Tracing a single transaction requires reexecuting all preceding transactions in the same block.
- A __node synced from genesis__ node only retains the most recent 128 block states in memory. Older states are represented by a sequence of occasional checkpoints that intermediate states can be regenerated from.


## Resources
---
- https://geth.ethereum.org/docs/developers/evm-tracing